var selectImage=function(){"use strict";return function(e){var s=e.btnOkText,p=e.btnCancelText,f=e.selectDeviceText,h=e.videoWidth,g=e.videoHeight,t=e.forceFile,E=void 0!==t&&t,b=e.preferedDevice,C=(e.deviceConstraints,e.cameraNameFormatter);return new Promise(function(i,t){var n={},e=navigator.getUserMedia;if(E||!e)return new Promise(function(i,e){var t=document.createElement("input");t.type="file",t.style.position="absolute",t.style.top="-100px",document.body.appendChild(t),t.addEventListener("change",function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){return i(e.target.result)},n.readAsDataURL(t)}),t.accept="image/x-png,image/gif,image/jpeg",t.multiple=!1,t.click()}).then(i);var a=document.createElement("div"),c=document.createElement("video"),d=document.createElement("div"),o=document.createElement("button"),r=document.createElement("button"),l=document.createElement("select"),u=function(e){a.parentElement.removeChild(a),t(e)};l.className="camera-selection",navigator.mediaDevices.enumerateDevices().then(function(e){a.appendChild(l),l.innerHTML='<option value="">'+f+"</option>",e.filter(function(e){return-1!==(e.kind||"").indexOf("video")}).map(function(e,t){return{id:e.deviceId,name:C?C(e,t):e.label||"Video input"}}).forEach(function(e,t){var n=document.createElement("option");n.textContent=e.name,n.value=e.id,b?-1!==e.name.indexOf(b)&&(n.selected=!0):0===t&&(n.selected=!0),l.appendChild(n)});var t=void 0;l.value&&(t={video:{deviceId:{exact:l.value}}}),m(t)}).catch(function(e){return u(e)}),o.textContent=s,r.textContent=p,r.className="cancel-btn",o.className="ok-btn",d.className="bottom-btns",d.appendChild(o),d.appendChild(r),a.appendChild(d);var v=function(e){n.getTracks().forEach(function(e){return e.stop()}),a.parentElement.removeChild(a)};r.addEventListener("click",v),o.addEventListener("click",function(e){var t=document.createElement("canvas");t.height=c.videoHeight,t.width=c.videoWidth,t.getContext("2d").drawImage(c,0,0,t.width,t.height);var n=t.toDataURL();v(),i(n)}),a.classList.add("camera-fullscreen"),document.body.appendChild(a);var m=function(e){(e=e||{}).video=e.video||{},h&&(e.video.width={min:h}),g&&(e.video.height={min:g}),navigator.getUserMedia(e,function(e){n=e,c.autoplay=!0,a.appendChild(c),"srcObject"in c?(c.srcObject=e,c.setAttribute("playsinline",""),c.play()):c.src=window.URL.createObjectURL(e)},function(e){return u(e)})};l.addEventListener("change",function(e){n.getTracks().forEach(function(e){return e.stop()});var t={deviceId:{exact:l.value}};h&&(t.width={min:h}),m({video:t})})})}}();
