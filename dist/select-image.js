var selectImage=function(){"use strict";return function(M){var o=M.btnOkText,z=M.btnCancelText,D=M.selectDeviceText,I=M.videoWidth,d=M.videoHeight,e=M.forceFile,s=void 0!==e&&e,y=M.preferedDevice,A=(M.deviceConstraints,M.facingMode),r=M.cameraNameFormatter,t=M.cameraSwitchIcon,l=void 0===t?"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4MCA0ODAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4MCA0ODA7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8Zz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBkPSJNNDQwLDExNnYtMTZjMC00LjQxOC0zLjU4Mi04LTgtOGgtNDhjLTQuNDE4LDAtOCwzLjU4Mi04LDh2MTZoLTE5LjM1MkwzMzYuMTYsODAuMTYgICAgIGMtNy4xMzItMTIuNDUyLTIwLjM3OC0yMC4xNDItMzQuNzI4LTIwLjE2SDE3OC41NjhjLTE0LjM1LDAuMDE4LTI3LjU5Niw3LjcwOC0zNC43MjgsMjAuMTZMMTIzLjM1MiwxMTZIMTIwVjkyICAgICBjMC00LjQxOC0zLjU4Mi04LTgtOEg0OGMtNC40MTgsMC04LDMuNTgyLTgsOHYyNGMtMjIuMDgsMC4wMjYtMzkuOTc0LDE3LjkyLTQwLDQwdjIyNGMwLjAyNiwyMi4wOCwxNy45MiwzOS45NzQsNDAsNDBoNDAwICAgICBjMjIuMDgtMC4wMjYsMzkuOTc0LTE3LjkyLDQwLTQwVjE1NkM0NzkuOTc0LDEzMy45Miw0NjIuMDgsMTE2LjAyNiw0NDAsMTE2eiBNMzkyLDEwOGgzMnY4aC0zMlYxMDh6IE01NiwxMDBoNDh2MTZINTZWMTAweiAgICAgIE00NjQsMzgwYzAsMTMuMjU1LTEwLjc0NSwyNC0yNCwyNEg0MGMtMTMuMjU1LDAtMjQtMTAuNzQ1LTI0LTI0VjE1NmMwLTEzLjI1NSwxMC43NDUtMjQsMjQtMjRoODggICAgIGMyLjg2NCwwLjAwNiw1LjUxMi0xLjUyLDYuOTQ0LTRsMjIuNzg0LTM5Ljg3MmM0LjI3NS03LjQ4MSwxMi4yMjMtMTIuMTA3LDIwLjg0LTEyLjEyOGgxMjIuODY0ICAgICBjOC41OTYsMC4wMjksMTYuNTI0LDQuNjQsMjAuOCwxMi4wOTZMMzQ1LjA1NiwxMjhjMS40MzIsMi40OCw0LjA4LDQuMDA2LDYuOTQ0LDRoODhjMTMuMjU1LDAsMjQsMTAuNzQ1LDI0LDI0VjM4MHoiIGZpbGw9IiMwMDAwMDAiLz4KCQkJPHBhdGggZD0iTTM0Ny41MzIsMjg0LjUwNGMtMC4wMDctMC4wMDMtMC4wMTMtMC4wMDUtMC4wMi0wLjAwOGMtNC4xMjctMS41NzctOC43NSwwLjQ5LTEwLjMyOCw0LjYxNiAgICAgYy0yMC41NjksNTMuNjI4LTgwLjcxOCw4MC40MjgtMTM0LjM0Niw1OS44NTljLTM2LjA3NC0xMy44MzYtNjEuNTA0LTQ2LjUzLTY2LjAzOC04NC44OTlsMTkuNTI4LDE5LjUyOCAgICAgYzMuMDcsMy4xNzgsOC4xMzQsMy4yNjYsMTEuMzEyLDAuMTk2YzMuMTc4LTMuMDcsMy4yNjYtOC4xMzQsMC4xOTYtMTEuMzEyYy0wLjA2NC0wLjA2Ny0wLjEzLTAuMTMyLTAuMTk2LTAuMTk2bC0zMy45NDQtMzMuOTQ0ICAgICBjLTMuMTI0LTMuMTIzLTguMTg4LTMuMTIzLTExLjMxMiwwTDg4LjQsMjcyLjI4OGMtMy4wNywzLjE3OC0yLjk4Miw4LjI0MiwwLjE5NiwxMS4zMTJjMy4xLDIuOTk1LDguMDE2LDIuOTk1LDExLjExNiwwICAgICBsMjAuOC0yMC44YzUuOTgzLDY2LjAwNCw2NC4zMzksMTE0LjY2LDEzMC4zNDMsMTA4LjY3N2M0NS42MDItNC4xMzMsODQuODc2LTMzLjg1NywxMDEuMjQxLTc2LjYyMiAgICAgQzM1My42OTQsMjkwLjczNywzNTEuNjUxLDI4Ni4xMDIsMzQ3LjUzMiwyODQuNTA0eiIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMzgwLjQ4NCwyMjAuMjA0Yy0wLjA2NywwLjA2NC0wLjEzMiwwLjEzLTAuMTk2LDAuMTk2bC0yMC44LDIwLjhjLTUuOTctNjYuMDA1LTY0LjMxNy0xMTQuNjcyLTEzMC4zMjItMTA4LjcwMiAgICAgYy00NS43OTQsNC4xNDItODUuMTk1LDM0LjA4OC0xMDEuNDQ2LDc3LjEwMmMtMS41NjIsNC4xMzMsMC41MjMsOC43NSw0LjY1NiwxMC4zMTJjNC4xMzMsMS41NjIsOC43NS0wLjUyMywxMC4zMTItNC42NTYgICAgIGMyMC4zNDEtNTMuNzE1LDgwLjM3NS04MC43NzEsMTM0LjA5LTYwLjQzMWMzNi4zMSwxMy43NSw2MS45MzgsNDYuNTgxLDY2LjQ2Miw4NS4xNDNMMzIzLjcxMiwyMjAuNCAgICAgYy0zLjA2OS0zLjE3OC04LjEzNC0zLjI2Ni0xMS4zMTItMC4xOTZjLTMuMTc4LDMuMDY5LTMuMjY2LDguMTM0LTAuMTk2LDExLjMxMmMwLjA2NCwwLjA2NywwLjEzLDAuMTMyLDAuMTk2LDAuMTk2ICAgICBsMzMuOTQ0LDMzLjk0NGMzLjEyNCwzLjEyMyw4LjE4OCwzLjEyMywxMS4zMTIsMGwzMy45NDQtMzMuOTQ0YzMuMTc4LTMuMDY5LDMuMjY2LTguMTM0LDAuMTk2LTExLjMxMiAgICAgQzM4OC43MjcsMjE3LjIyMiwzODMuNjYyLDIxNy4xMzQsMzgwLjQ4NCwyMjAuMjA0eiIgZmlsbD0iIzAwMDAwMCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K":t;return new Promise(function(i,e){var L={},t=0,j=void 0,M=navigator.getUserMedia;if(s||!M)return new Promise(function(i,M){var e=document.createElement("input");e.type="file",e.style.position="absolute",e.style.top="-100px",document.body.appendChild(e),e.addEventListener("change",function(M){var e=M.target.files[0],t=new FileReader;t.onload=function(M){return i(M.target.result)},t.readAsDataURL(e)}),e.accept="image/x-png,image/gif,image/jpeg",e.multiple=!1,e.click()}).then(i);var n=document.createElement("div"),T=document.createElement("video"),c=document.createElement("div"),C=document.createElement("button"),u=document.createElement("button"),w=document.createElement("img");w.src=l,w.classList.add("camera-switch-icon");var N=function(M){n.parentElement.removeChild(n),e(M)};navigator.mediaDevices.enumerateDevices().then(function(M){n.appendChild(w),w.alt=D,(j=M.filter(function(M){return-1!==(M.kind||"").indexOf("video")}).map(function(M,e){return{id:M.deviceId,name:r?r(M,e):M.label||"Video input",originalName:M.label||""}})).forEach(function(M,e){y?-1!==M.originalName.indexOf(y)&&(t=e):0===e&&(t=e)});var e=void 0;j[t]&&(e={video:{deviceId:{exact:j[t].id}}}),j.length?(w.addEventListener("click",function(){++t>j.length-1&&(t=0),L.getTracks().forEach(function(M){return M.stop()});var M={deviceId:{exact:j[t].id}};I&&(M.width={min:I}),a({video:M})}),a(e)):w.style.display="none"}).catch(function(M){return N(M)}),C.textContent=o,u.textContent=z,u.className="cancel-btn",C.className="ok-btn",c.className="bottom-btns",c.appendChild(C),c.appendChild(u),n.appendChild(c);var g=function(M){L.getTracks().forEach(function(M){return M.stop()}),n.parentElement.removeChild(n)};u.addEventListener("click",g),C.addEventListener("click",function(M){var e=document.createElement("canvas");e.height=T.videoHeight,e.width=T.videoWidth,e.getContext("2d").drawImage(T,0,0,e.width,e.height);var t=e.toDataURL();g(),i(t)}),n.classList.add("camera-fullscreen"),document.body.appendChild(n);var a=function(e){(e=e||{}).video=e.video||{},I&&(e.video.width={min:I}),d&&(e.video.height={min:d});var t=function(M){L=M,T.autoplay=!0,n.appendChild(T),"srcObject"in T?(T.srcObject=M,T.setAttribute("playsinline",""),T.play()):T.src=window.URL.createObjectURL(M)};try{navigator.mediaDevices.getUserMedia({video:A?{facingMode:A}:e.video}).then(t).catch(function(M){return N(M)})}catch(M){navigator.getUserMedia(e,t,function(M){return N(M)})}}})}}();
